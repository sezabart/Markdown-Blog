# Markdown-Blog

Markdown-Blog is a lightweight FastHTML server designed to automatically display blog posts based on directories within a specified content path. Each directory represents a blog, and any markdown files within the directory are treated as blog content. Images and other assets of the blog should be stored in the directory.

## Features

- Automatically detects and serves blog posts from directories.
- Supports markdown files for blog content.
- Serves images and other assets from the same directory as the markdown files.

## Installation

1. Clone the repository:
    ```sh
    git clone https://github.com/sezabart/markdown-blog.git
    cd markdown-blog
    ```

2. Install Python (if not already installed). You can download it from [python.org](https://www.python.org/).

3. Install the required Python packages:
    ```sh
    pip install -r requirements.txt
    ```

## Usage development

1. Start the server:
    ```sh
    python main.py 
    ```
2. Place your blog directories inside the `content` path. Each directory should contain markdown files and any related assets.

## Usage production

1. Set ENV variables:
```sh
SMTP_PASSWORD=password
ADMIN_PASSWORD=password
```
2. Use the following command to have ssl:
```sh
uvicorn main:app --host 0.0.0.0 --port 443 --ssl-keyfile=/etc/letsencrypt/live/seza.si/privkey.pem --ssl-certfile=/etc/letsencrypt/live/seza.si/fullchain.pem
```
3. Renew certification
`certbot renew`

## Directory Structure

```
content/
├── post1/
│   ├── update1.md
│   ├── update2.md
│   ├── image1.png
├── post2/
│   ├── update1.md
│   ├── image2.jpg
```

## Contributing

Contributions are welcome! Please submit a pull request or open an issue to discuss any changes.

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

## Docker

Run the app in Docker for a reproducible deployment. The compose setup below demonstrates mounting an existing host directory (for example a path on a larger attached disk) into the container's `content` directory so you can keep blog content outside the container.

- Build image and start (preferred):

```sh
# Set BLOG_CONTENT to the host path where your blog content lives (example):
export BLOG_CONTENT=/mnt/hdd/documents/your-user/blog-content
export SMTP_PASSWORD=your_smtp_password
export ADMIN_PASSWORD=your_admin_password
docker compose up --build -d
```

- Quick local run (without compose):

```sh
# Build Docker image
docker build -t markdown-blog .
# Run, mounting content directory
docker run -p 8000:8000 -e SMTP_PASSWORD -e ADMIN_PASSWORD -v /mnt/hdd/documents/your-user/blog-content:/app/content:ro markdown-blog
```

Notes:
- The compose file maps `./mailing_lists` and `./mail_meta` to the container so mailing lists and send metadata persist outside the container. If you want them elsewhere, change the volume paths.
- The default listen port is 8000; map that to 80/443 with a reverse proxy (nginx, Caddy) if you need TLS.